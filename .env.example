# ==============================================================================
# ZKP Auth System - 环境变量配置模板
# 使用方法：复制此文件为 .env 并填入实际值
# ==============================================================================

# ------------------------------------------------------------------------------
# Database (PostgreSQL) - 基础数据库配置
# ------------------------------------------------------------------------------
POSTGRES_DB=zk_auth
POSTGRES_USER=zkuser
POSTGRES_PASSWORD=<your_secure_password_here>          # 建议：32位以上随机字符串
POSTGRESQL_USERNAME=zkuser
POSTGRESQL_PASSWORD=<your_secure_password_here>        # 与上一行保持一致
POSTGRESQL_DATABASE=zk_auth

# ------------------------------------------------------------------------------
# PostgreSQL Replication - 主从复制配置
# ------------------------------------------------------------------------------
PROTGRESQL_IMAGE=bitnami/postgresql:16                 # 固定版本避免意外升级
POSTGRESQL_REPLICATION_USER=repl_user                  # 复制专用账号
POSTGRESQL_REPLICATION_PASSWORD=<repl_strong_password> # 必须与主库不同

# Spring Datasource - 应用数据库连接（开发环境用 localhost，生产用 pg-primary 容器名）
# ------------------------------------------------------------------------------
SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5432/zk_auth
SPRING_DATASOURCE_USERNAME=zkuser
SPRING_DATASOURCE_PASSWORD=<your_secure_password_here>
SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.postgresql.Driver

# ------------------------------------------------------------------------------
# Redis Cluster - 集群配置
# ------------------------------------------------------------------------------
REDIS_IMAGE=redis:8.4                                  # Redis 8.4+ 支持新集群协议
SPRING_REDIS_HOST=localhost
SPRING_REDIS_PORT=6379

# Redis Cluster 节点地址（Docker 内部网络 IP）
# 格式：host:port,host:port...
# 生产环境建议仅配置主节点（前3个），Lettuce 会自动发现从节点
SPRING_REDIS_CLUSTER_NODES=172.28.0.101:6379,172.28.0.102:6379,172.28.0.103:6379,172.28.0.104:6379,172.28.0.105:6379,172.28.0.106:6379

# 如果 Redis 设置了密码（生产环境建议启用）
# SPRING_REDIS_PASSWORD=<redis_password>

# ------------------------------------------------------------------------------
# Kafka 4.0 KRaft (无 ZooKeeper 模式)
# ------------------------------------------------------------------------------
KAFKA_IMAGE=apache/kafka:4.0.0                         # Kafka 4.0 原生 KRaft 模式

# 生成方式：docker run --rm apache/kafka:4.0.0 kafka-storage.sh random-uuid
# 每个集群必须有唯一的 CLUSTER_ID，重建集群时需重新生成
KAFKA_CLUSTER_ID=<generate_unique_uuid_here>

# Spring Kafka 连接地址（宿主机映射端口）
# 格式：host:port,host:port...
SPRING_KAFKA_BOOTSTRAP_SERVERS=localhost:9092,localhost:9093,localhost:9094

# ------------------------------------------------------------------------------
# 安全配置（可选但强烈建议）
# ------------------------------------------------------------------------------
# ZKP 挑战过期时间（分钟）
ZKP_CHALLENGE_TTL=5

# JWT 密钥（用于签名 Token，必须 256-bit 以上）
JWT_SECRET=<generate_64_char_hex_string>

# 日志级别（开发环境 DEBUG，生产环境 WARN）
LOG_LEVEL=DEBUG